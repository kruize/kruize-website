<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Generate Recommendations API | Kruize Documentation</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">



    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Kruize Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://github.com/kruize/autotune" target="_blank" rel="noopener">GitHub</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Links<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://join.slack.com/t/kruizeworkspace/shared_invite/zt-31jrkfcw3-zPCIHrpf1Az33TCSSeLCQQ" target="_blank" rel="noopener">Kruize Slack</a></li>
                        
                        
                        
                        <li><a href="https://kruize.io" target="_blank" rel="noopener">Website</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:kruize@redhat.com?subject=Kruize Documentation feedback&body=I have some feedback about the Generate Recommendations API page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>



		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Generate Recommendations API">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>



<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Kruize Documentation 0.1</li>
  
  
  
      
  
  <li>
      <a title="Overview" href="#">Overview</a>
      <ul>
          
          
          
          <li><a title="Introduction to Kruize" href="index.html">Introduction to Kruize</a></li>
          
          
          
          
          
          
          <li><a title="Getting Started" href="getting_started.html">Getting Started</a></li>
          
          
          
          
          
          
          <li><a title="Experiment Modes" href="experiment_modes.html">Experiment Modes</a></li>
          
          
          
          
          
          
          <li><a title="Performance Profiles" href="performance_profiles.html">Performance Profiles</a></li>
          
          
          
          
          
          
          <li><a title="Support" href="support.html">Support</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Release Notes" href="#">Release Notes</a>
      <ul>
          
          
          
          <li><a title="Autotune Release Notes" href="autotune_release_notes.html">Autotune Release Notes</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Installation" href="#">Installation</a>
      <ul>
          
          
          
          <li><a title="Remote Monitoring Mode" href="rm_installation.html">Remote Monitoring Mode</a></li>
          
          
          
          
          
          
          <li><a title="Local Monitoring Mode" href="lm_installation.html">Local Monitoring Mode</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Local Monitoring APIs" href="#">Local Monitoring APIs</a>
      <ul>
          
          
          
          <li><a title="Create Experiment API" href="lm_create_exp.html">Create Experiment API</a></li>
          
          
          
          
          
          
          <li><a title="List Experiments API" href="lm_list_exp.html">List Experiments API</a></li>
          
          
          
          
          
          
          <li class="active"><a title="Generate Recommendations API" href="lm_generate_recommendations.html">Generate Recommendations API</a></li>
          
          
          
          
          
          
          <li><a title="List Recommendations API" href="mydoc_conditional_logic.html">List Recommendations API</a></li>
          
          
          
          
          
          
          <li><a title="Create Performance Profile API" href="mydoc_content_reuse.html">Create Performance Profile API</a></li>
          
          
          
          
          
          
          <li><a title="Others" href="mydoc_collections.html">Others</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Remote Monitoring APIs" href="#">Remote Monitoring APIs</a>
      <ul>
          
          
          
          <li><a title="Create Experiment API" href="rm_create_experiment.html">Create Experiment API</a></li>
          
          
          
          
          
          
          <li><a title="List Experiments API" href="rm_list_experiments.html">List Experiments API</a></li>
          
          
          
          
          
          
          <li><a title="Generate Recommendations API" href="rm_generate_recommendations.html">Generate Recommendations API</a></li>
          
          
          
          
          
          
          <li><a title="List Recommendations API" href="rm_list_recommendations.html">List Recommendations API</a></li>
          
          
          
          
          
          
          <li><a title="Create Metric Profile API" href="rm_create_metric_profile.html">Create Metric Profile API</a></li>
          
          
          
          
          
          
          <li><a title="Update Results API" href="rm_update_results.html">Update Results API</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Auto-scaling APIs" href="#">Auto-scaling APIs</a>
      <ul>
          
          
          
          <li><a title="Create Experiment API" href="mydoc_pages.html">Create Experiment API</a></li>
          
          
          
          
          
          
          <li><a title="List Experiments API" href="mydoc_posts.html">List Experiments API</a></li>
          
          
          
          
          
          
          <li><a title="List Recommendations API" href="mydoc_conditional_logic.html">List Recommendations API</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Use Cases" href="#">Use Cases</a>
      <ul>
          
          
          
          <li><a title="Cost Optimisation" href="mydoc_sidebar_navigation.html">Cost Optimisation</a></li>
          
          
          
          
          
          
          <li><a title="Performance Optimisation" href="mydoc_yaml_tutorial.html">Performance Optimisation</a></li>
          
          
          
          
          
          
          <li><a title="Namespace Monitoring" href="mydoc_tags.html">Namespace Monitoring</a></li>
          
          
          
          
          
          
          <li><a title="GPU Recommendations" href="mydoc_series.html">GPU Recommendations</a></li>
          
          
          
          
          
          
          <li><a title="Autoscaling" href="mydoc_series.html">Autoscaling</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Troubleshooting" href="#">Troubleshooting</a>
      <ul>
          
          
          
          <li><a title="Troubleshooting" href="mydoc_troubleshooting.html">Troubleshooting</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Kruize Blogs" href="#">Kruize Blogs</a>
      <ul>
          
          
          
          <li><a title="Optimizig Namespace Quotas With Kruize" href="mydoc_troubleshooting.html">Optimizig Namespace Quotas With Kruize</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>



            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Generate Recommendations API</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>



    


    

    <a target="_blank" rel="noopener" href="https://github.com/shekhar316/kruizedoc/blob/gh-pages/pages/mydoc/lm_generate_recommendations.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>

    

   <h3 id="generate-recommendations-api">Generate Recommendations API</h3>

<p><strong>Note: This API is specific to the Local Monitoring use case.</strong> <br />
Generates the recommendation for a specific experiment based on provided parameters similar to update recommendations API.
This can be called directly after creating the experiment and doesn’t require the update results API as metrics are
fetched from the provided <code class="language-plaintext highlighter-rouge">datasource</code> (E.g. Prometheus) instead of the database.</p>

<p><strong>Request Parameters</strong></p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Required</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>experiment_name</td>
      <td>string</td>
      <td>Yes</td>
      <td>The name of the experiment.</td>
    </tr>
    <tr>
      <td>interval_end_time</td>
      <td>string</td>
      <td>optional</td>
      <td>The end time of the interval in the format <code class="language-plaintext highlighter-rouge">yyyy-MM-ddTHH:mm:sssZ</code>. This should be the date on which recommendation needs to be generated.</td>
    </tr>
    <tr>
      <td>interval_start_time</td>
      <td>string</td>
      <td>optional</td>
      <td>The start time of the interval in the format <code class="language-plaintext highlighter-rouge">yyyy-MM-ddTHH:mm:sssZ</code>.</td>
    </tr>
  </tbody>
</table>

<p>The recommendation API requires only one mandatory field i.e. <code class="language-plaintext highlighter-rouge">experiment_name</code>. Other optional parameter like <code class="language-plaintext highlighter-rouge">interval_end_time</code> will be fetched from the provided datasource.
Similarly, <code class="language-plaintext highlighter-rouge">interval_start_time</code> will be calculated based on <code class="language-plaintext highlighter-rouge">interval_end_time</code>, if not provided. By utilizing
these parameters, the API generates recommendations based on short-term, medium-term, and long-term factors. For
instance, if the long-term setting is configured for <code class="language-plaintext highlighter-rouge">15 days</code> and the interval_end_time is set to <code class="language-plaintext highlighter-rouge">Jan 15 2023 00:00:
00.000Z</code>, the API retrieves data from the past 15 days, starting from January 1st. Using this data, the API generates
three recommendations for <code class="language-plaintext highlighter-rouge">Jan 15th 2023</code>.</p>

<p>It is important to ensure that the difference between <code class="language-plaintext highlighter-rouge">interval_end_time</code> and <code class="language-plaintext highlighter-rouge">interval_start_time</code> should not exceed 15
days. This restriction is in place to prevent potential timeouts, as generating recommendations beyond this threshold
might require more time.</p>

<p><strong>Request with experiment name and interval_end_time parameters</strong></p>

<p><code class="language-plaintext highlighter-rouge">POST /generateRecommendations?experiment_name=?&amp;interval_end_time=?</code></p>

<p><code class="language-plaintext highlighter-rouge">POST /generateRecommendations?experiment_name=?&amp;interval_end_time=?&amp;interval_start_time=?</code></p>

<p>example</p>

<p><code class="language-plaintext highlighter-rouge">curl --location --request POST 'http://&lt;URL&gt;:&lt;PORT&gt;/generateRecommendations?interval_end_time=2023-01-02T00:15:00.000Z&amp;experiment_name=temp_1'</code></p>

<p>success status code : 201</p>

<p><strong>Response</strong></p>

<p>The response will contain a array of JSON object with the recommendations for the specified experiment.</p>

<details>
<summary><b>Example Response Body</b></summary>

```json
[
  {
    "cluster_name": "default",
    "experiment_type": "container",
    "kubernetes_objects": [
      {
        "type": "deployment",
        "name": "tfb-qrh-deployment_5",
        "namespace": "default_5",
        "containers": [
          {
            "container_image_name": "kruize/tfb-qrh:1.13.2.F_et17",
            "container_name": "tfb-server-1",
            "recommendations": {
              "version": "1.0",
              "notifications": {
                "111000": {
                  "type": "info",
                  "message": "Recommendations Are Available",
                  "code": 111000
                }
              },
              "data": {
                "2023-04-02T13:30:00.680Z": {
                  "notifications": {
                    "111101": {
                      "type": "info",
                      "message": "Short Term Recommendations Available",
                      "code": 111101
                    }
                  },
                  "monitoring_end_time": "2023-04-02T13:30:00.680Z",
                  "current": {
                    "limits": {
                      "memory": {
                        "amount": 1.048576E8,
                        "format": "bytes"
                      },
                      "cpu": {
                        "amount": 0.5,
                        "format": "cores"
                      }
                    },
                    "requests": {
                      "memory": {
                        "amount": 5.264900096E7,
                        "format": "bytes"
                      },
                      "cpu": {
                        "amount": 5.37,
                        "format": "cores"
                      }
                    }
                  },
                  "recommendation_terms": {
                    "short_term": {
                      "duration_in_hours": 24.0,
                      "notifications": {
                        "112101": {
                          "type": "info",
                          "message": "Cost Recommendations Available",
                          "code": 112101
                        },
                        "112102": {
                          "type": "info",
                          "message": "Performance Recommendations Available",
                          "code": 112102
                        }
                      },
                      "monitoring_start_time": "2023-04-01T12:00:00.000Z",
                      "recommendation_engines": {
                        "cost": {
                          "pods_count": 7,
                          "confidence_level": 0.0,
                          "config": {
                            "limits": {
                              "memory": {
                                "amount": 2.497708032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": 0.9299999999999999,
                                "format": "cores"
                              }
                            },
                            "requests": {
                              "memory": {
                                "amount": 2.497708032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": 0.9299999999999999,
                                "format": "cores"
                              }
                            }
                          },
                          "variation": {
                            "limits": {
                              "memory": {
                                "amount": 1.449132032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": -4.44,
                                "format": "cores"
                              }
                            },
                            "requests": {
                              "memory": {
                                "amount": 1.9712180223999997902848E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": -4.44,
                                "format": "cores"
                              }
                            }
                          },
                          "notifications": {}
                        },
                        "performance": {
                          "pods_count": 27,
                          "confidence_level": 0.0,
                          "config": {
                            "limits": {
                              "memory": {
                                "amount": 2.497708032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": 0.9299999999999999,
                                "format": "cores"
                              }
                            },
                            "requests": {
                              "memory": {
                                "amount": 2.497708032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": 0.9299999999999999,
                                "format": "cores"
                              }
                            }
                          },
                          "variation": {
                            "limits": {
                              "memory": {
                                "amount": 1.449132032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": -4.44,
                                "format": "cores"
                              }
                            },
                            "requests": {
                              "memory": {
                                "amount": 1.9712180223999997902848E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": -4.44,
                                "format": "cores"
                              }
                            }
                          },
                          "notifications": {}
                        }
                      }
                    },
                    "medium_term": {
                      "duration_in_hours": 33.8,
                      "notifications": {
                        "120001": {
                          "type": "info",
                          "message": "There is not enough data available to generate a recommendation.",
                          "code": 120001
                        }
                      }
                    },
                    "long_term": {
                      "duration_in_hours": 33.8,
                      "notifications": {
                        "120001": {
                          "type": "info",
                          "message": "There is not enough data available to generate a recommendation.",
                          "code": 120001
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          {
            "container_image_name": "kruize/tfb-db:1.15",
            "container_name": "tfb-server-0",
            "recommendations": {
              "version": "1.0",
              "notifications": {
                "120001": {
                  "type": "info",
                  "message": "There is not enough data available to generate a recommendation.",
                  "code": 120001
                }
              },
              "data": {}
            }
          }
        ]
      }
    ],
    "version": "v2.0",
    "experiment_name": "temp_1"
  }
]
```

</details>

<p><strong>Request without interval_end_time parameter</strong></p>

<p><code class="language-plaintext highlighter-rouge">POST /generateRecommendations?experiment_name=?</code></p>

<p>example</p>

<p><code class="language-plaintext highlighter-rouge">curl --location --request POST 'http://&lt;URL&gt;:&lt;PORT&gt;/generateRecommendations?experiment_name=temp_1'</code></p>

<p>success status code : 201</p>

<p><strong>Response</strong></p>

<p>The response will contain an array of JSON object with the recommendations for the specified experiment.</p>

<p>When <code class="language-plaintext highlighter-rouge">interval_end_time</code> is not specified, Kruize will determine the latest timestamp from the specified datasource
(E.g. Prometheus) by checking the latest active container CPU usage.</p>

<details>
<summary><b>Example Response Body</b></summary>

```json
[
  {
    "cluster_name": "default",
    "experiment_type": "container",
    "kubernetes_objects": [
      {
        "type": "deployment",
        "name": "tfb-qrh-deployment_5",
        "namespace": "default_5",
        "containers": [
          {
            "container_image_name": "kruize/tfb-qrh:1.13.2.F_et17",
            "container_name": "tfb-server-1",
            "recommendations": {
              "version": "1.0",
              "notifications": {
                "111000": {
                  "type": "info",
                  "message": "Recommendations Are Available",
                  "code": 111000
                }
              },
              "data": {
                "2023-04-02T13:30:00.680Z": {
                  "notifications": {
                    "111101": {
                      "type": "info",
                      "message": "Short Term Recommendations Available",
                      "code": 111101
                    }
                  },
                  "monitoring_end_time": "2023-04-02T13:30:00.680Z",
                  "current": {
                    "limits": {
                      "memory": {
                        "amount": 1.048576E8,
                        "format": "bytes"
                      },
                      "cpu": {
                        "amount": 0.5,
                        "format": "cores"
                      }
                    },
                    "requests": {
                      "memory": {
                        "amount": 5.264900096E7,
                        "format": "bytes"
                      },
                      "cpu": {
                        "amount": 5.37,
                        "format": "cores"
                      }
                    }
                  },
                  "recommendation_terms": {
                    "short_term": {
                      "duration_in_hours": 24.0,
                      "notifications": {
                        "112101": {
                          "type": "info",
                          "message": "Cost Recommendations Available",
                          "code": 112101
                        },
                        "112102": {
                          "type": "info",
                          "message": "Performance Recommendations Available",
                          "code": 112102
                        }
                      },
                      "monitoring_start_time": "2023-04-01T12:00:00.000Z",
                      "recommendation_engines": {
                        "cost": {
                          "pods_count": 7,
                          "confidence_level": 0.0,
                          "config": {
                            "limits": {
                              "memory": {
                                "amount": 2.497708032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": 0.9299999999999999,
                                "format": "cores"
                              }
                            },
                            "requests": {
                              "memory": {
                                "amount": 2.497708032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": 0.9299999999999999,
                                "format": "cores"
                              }
                            }
                          },
                          "variation": {
                            "limits": {
                              "memory": {
                                "amount": 1.449132032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": -4.44,
                                "format": "cores"
                              }
                            },
                            "requests": {
                              "memory": {
                                "amount": 1.9712180223999997902848E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": -4.44,
                                "format": "cores"
                              }
                            }
                          },
                          "notifications": {}
                        },
                        "performance": {
                          "pods_count": 27,
                          "confidence_level": 0.0,
                          "config": {
                            "limits": {
                              "memory": {
                                "amount": 2.497708032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": 0.9299999999999999,
                                "format": "cores"
                              }
                            },
                            "requests": {
                              "memory": {
                                "amount": 2.497708032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": 0.9299999999999999,
                                "format": "cores"
                              }
                            }
                          },
                          "variation": {
                            "limits": {
                              "memory": {
                                "amount": 1.449132032E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": -4.44,
                                "format": "cores"
                              }
                            },
                            "requests": {
                              "memory": {
                                "amount": 1.9712180223999997902848E8,
                                "format": "bytes"
                              },
                              "cpu": {
                                "amount": -4.44,
                                "format": "cores"
                              }
                            }
                          },
                          "notifications": {}
                        }
                      }
                    },
                    "medium_term": {
                      "duration_in_hours": 33.8,
                      "notifications": {
                        "120001": {
                          "type": "info",
                          "message": "There is not enough data available to generate a recommendation.",
                          "code": 120001
                        }
                      }
                    },
                    "long_term": {
                      "duration_in_hours": 33.8,
                      "notifications": {
                        "120001": {
                          "type": "info",
                          "message": "There is not enough data available to generate a recommendation.",
                          "code": 120001
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          {
            "container_image_name": "kruize/tfb-db:1.15",
            "container_name": "tfb-server-0",
            "recommendations": {
              "version": "1.0",
              "notifications": {
                "120001": {
                  "type": "info",
                  "message": "There is not enough data available to generate a recommendation.",
                  "code": 120001
                }
              },
              "data": {}
            }
          }
        ]
      }
    ],
    "version": "v2.0",
    "experiment_name": "temp_1"
  }
]
```

</details>

<p><strong>Request for <code class="language-plaintext highlighter-rouge">namespace</code> experiment</strong></p>

<p><code class="language-plaintext highlighter-rouge">POST /generateRecommendations?experiment_name=?</code></p>

<p>example</p>

<p><code class="language-plaintext highlighter-rouge">curl --location --request POST 'http://&lt;URL&gt;:&lt;PORT&gt;/generateRecommendations?experiment_name=temp_1'</code></p>

<p>success status code : 201</p>

<p><strong>Response for <code class="language-plaintext highlighter-rouge">namespace</code> Experiment</strong></p>

<p>The response will contain an array of JSON object with the recommendations for the specified experiment.</p>

<p>When <code class="language-plaintext highlighter-rouge">interval_end_time</code> is not specified, Kruize will determine the latest timestamp from the specified datasource
(E.g. Prometheus) by checking the latest active container CPU usage.</p>

<details>
<summary><b>Example Response Body</b></summary>

```json
[
  {
    "cluster_name": "test-multiple-import",
    "experiment_type": "namespace",
    "kubernetes_objects": [
      {
        "namespace": "default",
        "containers": [],
        "namespaces": {
          "namespace": "default",
          "recommendations": {
            "version": "1.0",
            "notifications": {
              "111000": {
                "type": "info",
                "message": "Recommendations Are Available",
                "code": 111000
              }
            },
            "data": {
              "2024-09-25T09:46:20.000Z": {
                "notifications": {
                  "111101": {
                    "type": "info",
                    "message": "Short Term Recommendations Available",
                    "code": 111101
                  }
                },
                "monitoring_end_time": "2024-09-25T09:46:20.000Z",
                "current": {},
                "recommendation_terms": {
                  "short_term": {
                    "duration_in_hours": 24.0,
                    "notifications": {
                      "112101": {
                        "type": "info",
                        "message": "Cost Recommendations Available",
                        "code": 112101
                      },
                      "112102": {
                        "type": "info",
                        "message": "Performance Recommendations Available",
                        "code": 112102
                      }
                    },
                    "monitoring_start_time": "2024-09-24T09:46:20.000Z",
                    "recommendation_engines": {
                      "cost": {
                        "pods_count": 2,
                        "confidence_level": 0.0,
                        "config": {
                          "limits": {
                            "memory": {
                              "amount": 1.442955264E9,
                              "format": "bytes"
                            },
                            "cpu": {
                              "amount": 5.834468490017892,
                              "format": "cores"
                            }
                          },
                          "requests": {
                            "memory": {
                              "amount": 1.442955264E9,
                              "format": "bytes"
                            },
                            "cpu": {
                              "amount": 5.834468490017892,
                              "format": "cores"
                            }
                          }
                        },
                        "variation": {
                          "limits": {
                            "memory": {
                              "amount": 1.442955264E9,
                              "format": "bytes"
                            },
                            "cpu": {
                              "amount": 5.834468490017892,
                              "format": "cores"
                            }
                          },
                          "requests": {
                            "memory": {
                              "amount": 1.442955264E9,
                              "format": "bytes"
                            },
                            "cpu": {
                              "amount": 5.834468490017892,
                              "format": "cores"
                            }
                          }
                        },
                        "notifications": {}
                      },
                      "performance": {
                        "pods_count": 2,
                        "confidence_level": 0.0,
                        "config": {
                          "limits": {
                            "memory": {
                              "amount": 1.442955264E9,
                              "format": "bytes"
                            },
                            "cpu": {
                              "amount": 5.834468490017892,
                              "format": "cores"
                            }
                          },
                          "requests": {
                            "memory": {
                              "amount": 1.442955264E9,
                              "format": "bytes"
                            },
                            "cpu": {
                              "amount": 5.834468490017892,
                              "format": "cores"
                            }
                          }
                        },
                        "variation": {
                          "limits": {
                            "memory": {
                              "amount": 1.442955264E9,
                              "format": "bytes"
                            },
                            "cpu": {
                              "amount": 5.834468490017892,
                              "format": "cores"
                            }
                          },
                          "requests": {
                            "memory": {
                              "amount": 1.442955264E9,
                              "format": "bytes"
                            },
                            "cpu": {
                              "amount": 5.834468490017892,
                              "format": "cores"
                            }
                          }
                        },
                        "notifications": {}
                      }
                    }
                  },
                  "medium_term": {
                    "duration_in_hours": 168.0,
                    "notifications": {
                      "120001": {
                        "type": "info",
                        "message": "There is not enough data available to generate a recommendation.",
                        "code": 120001
                      }
                    }
                  },
                  "long_term": {
                    "duration_in_hours": 360.0,
                    "notifications": {
                      "120001": {
                        "type": "info",
                        "message": "There is not enough data available to generate a recommendation.",
                        "code": 120001
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    ],
    "version": "v2.0",
    "experiment_name": "namespace-demo"
  }
]
```

</details>

<p><strong>Error Responses</strong></p>

<table>
  <thead>
    <tr>
      <th>HTTP Status Code</th>
      <th>Description</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>400</td>
      <td>experiment_name is mandatory.</td>
      <td> </td>
    </tr>
    <tr>
      <td>400</td>
      <td>Given timestamp - " 2023-011-02T00:00:00.000Z " is not a valid timestamp format.</td>
      <td> </td>
    </tr>
    <tr>
      <td>400</td>
      <td>Not Found: experiment_name does not exist: exp_1.</td>
      <td> </td>
    </tr>
    <tr>
      <td>400</td>
      <td>No metrics available from <code class="language-plaintext highlighter-rouge">2024-01-15T00:00:00.000Z</code> to <code class="language-plaintext highlighter-rouge">2023-12-31T00:00:00.000Z</code>.</td>
      <td> </td>
    </tr>
    <tr>
      <td>400</td>
      <td>The gap between the interval_start_time and interval_end_time must be within a maximum of 15 days!</td>
      <td> </td>
    </tr>
    <tr>
      <td>400</td>
      <td>The Start time should precede the End time!</td>
      <td> </td>
    </tr>
    <tr>
      <td>500</td>
      <td>Internal Server Error</td>
      <td> </td>
    </tr>
  </tbody>
</table>


    <div class="tags">
        
    </div>

<!-- 
<div id="commento"></div>
<script src="https://cdn.commento.io/js/commento.js"></script>
<noscript>Please enable JavaScript to load the comments.</noscript>



 -->


</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
                	<p><img src="images/company_logo.png" alt="Company logo"/></p>
                	<br />
               &copy;2025 Red Hat India. All rights reserved. <br />
 Site last generated: Oct 22, 2025 
                </div>
            </div>
</footer>






        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>


